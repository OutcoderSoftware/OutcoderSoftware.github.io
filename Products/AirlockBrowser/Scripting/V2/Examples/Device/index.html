<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<title>Airlock Browser Scripting - Barcode</title>
	<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	<link href="../../../CodeFormatting/prism.css" rel="stylesheet" />
	<script src="../ScriptExamples.js"></script>
	<link rel="stylesheet" type="text/css" href="../ScriptExamples.css" />
</head>
<body>
<script src="../../../CodeFormatting/prism.js"></script>
<div class="header">
	<div class="navigation"><a href="../" class="navigation">Airlock Browser Scripting</a></div>
	<h2>Device</h2>
</div>
<div id="dialog"><div id="dialogText" style="white-space: pre-wrap;"></div></div>

<div class="testDiv">
	<h3>Changing Screen Brightness</h3>
	<script id="setBrightnessScript">
function testSetBrightness(textElement) {
	try {
		var brightness = airlock.device.getBrightness();
		brightness -= .1;
		if (brightness < .2) {
			brightness = 1;
		}
		airlock.device.setBrightness(brightness);
		setText(textElement, "Set brightness to " + brightness);
	} catch (e) {
		setText(textElement, "Error: " + e);
		return;
	}
}
	</script>
	<pre class="example" id="setBrightnessPre"></pre>
	<script>insertScriptInPre('setBrightnessPre', 'setBrightnessScript');</script>
	<input type="button" onclick="testSetBrightness('setBrightnessText')" value="Set Brightness" />
	<div class="outputText" type="text" id="setBrightnessText"></div>
</div>

<div class="testDiv">
	<h3>Using Ringer Mode</h3>
	<script id="setRingerModeScript">
function testSetRingerMode(textElement) {
	try {
		var value = airlock.device.getRingerMode();
		value += 1;
		if (value > 2) {
			value = 0;
		}
		airlock.device.setRingerMode(value);
		setText(textElement, "Set Mode to " + value);
	} catch (e) {
		setText(textElement, "Error: " + e);
		return;
	}
}
	</script>
	<pre class="example" id="setRingerModePre"></pre>
	<script>insertScriptInPre('setRingerModePre', 'setRingerModeScript');</script>
	<input type="button" onclick="testSetRingerMode('setRingerModeText')" value="Set Ringer Mode" />
	<div class="outputText" type="text" id="setRingerModeText"></div>
</div>

<div class="testDiv">
	<h3>Getting and Setting Volume</h3>
	<script id="getSetVolumeScript">
function testSetVolume(output1, output2) {
	try {
		var streamType = 3; // Music
		var maxVolume = airlock.device.getMaxVolume(streamType);
		setText(output2, "Max volume for stream " + streamType + " is " + maxVolume);
		var value = airlock.device.getVolume(streamType);
		value += 1;
		if (value > maxVolume) {
			value = 0;
		}
		airlock.device.setVolume(streamType, value);
		setText(output1, "Set value to " + value);
	} catch (e) {
		setText(output1, "Error: " + e);
		return;
	}
}
	</script>
	<pre class="example" id="getSetVolumePre"></pre>
	<script>insertScriptInPre('getSetVolumePre', 'getSetVolumeScript');</script>
	<input type="button" onclick="testSetVolume('setVolumeText', 'maxVolumeText')" value="Set Volume" />
	<div class="outputText" type="text" id="setVolumeText"></div>
	<div class="outputText" type="text" id="maxVolumeText"></div>
</div>

<div class="testDiv">
	<h3>Sounding a Beep</h3>
	<script id="beepScript">
function testBeep(textElement) {
	try {
		airlock.device.beep();
		setText(textElement, "Beeped!");
	} catch (e) {
		setText(textElement, "Error: " + e);
		return;
	}
}
	</script>
	<pre class="example" id="beepPre"></pre>
	<script>insertScriptInPre('beepPre', 'beepScript');</script>
	<input type="button" onclick="testBeep('testBeepText')" value="Beep" />
	<div class="outputText" type="text" id="testBeepText"></div>
</div>

<div class="testDiv">
	<h3>Vibrating the Device</h3>
	<script id="vibrateScript">
function testVibrate(textElement) {
	try {
		airlock.device.vibrate(100);
		setText(textElement, "Vibrated!");
	} catch (e) {
		setText(textElement, "Error: " + e);
		return;
	}
}
	</script>
	<pre class="example" id="vibratePre"></pre>
	<script>insertScriptInPre('vibratePre', 'vibrateScript');</script>
	<input type="button" onclick="testVibrate('testVibrateText')" value="Vibrate"/>
	<div class="outputText" type="text" id="testVibrateText"></div>
</div>

<div class="testDiv">
	<h3>Getting Screen Timeout</h3>
	<script id="getScreenTimeoutScript">
function testGetScreenTimeoutMS(textElement) {
	try {
		var value = airlock.device.getScreenTimeoutMS();
		setText(textElement, value + " MS");
	} catch (e) {
		setText(textElement, "Error: " + e);
		return;
	}
}
	</script>
	<pre class="example" id="getScreenTimeoutPre"></pre>
	<script>insertScriptInPre('getScreenTimeoutPre', 'getScreenTimeoutScript');</script>
	<input type="button" onclick="testGetScreenTimeoutMS('testGetScreenTimeoutMSText')" value="Get Screen Timeout MS" />
	<div class="outputText" type="text" id="testGetScreenTimeoutMSText"></div>
</div>

<div class="testDiv">
	<h3>Setting Screen Timeout</h3>
	<script id="setScreenTimeoutScript">
function testSetScreenTimeoutMS(textElement) {
	try {
		var currentTimeout = airlock.device.getScreenTimeoutMS();
		var twoMinutesMS = 1000 * 60 * 2;
		var thritySecondsMS = 1000 * 30;
		var halfHourMS = 1000 * 60 * 30;
		var value = currentTimeout < twoMinutesMS ? halfHourMS : thritySecondsMS;

		airlock.device.setScreenTimeoutMS(value);
		setText(textElement, "Set Screen TimeoutMS to " + value / 1000 / 60 + " minutes.");
	} catch (e) {
		setText(textElement, "Error: " + e);
		return;
	}
}
	</script>
	<pre class="example" id="setScreenTimeoutPre"></pre>
	<script>insertScriptInPre('setScreenTimeoutPre', 'setScreenTimeoutScript');</script>
	<input type="button" onclick="testSetScreenTimeoutMS('testSetScreenTimeoutMSText')" value="Set Screen Timeout MS" />
	<div class="outputText" type="text" id="testSetScreenTimeoutMSText"></div>
</div>

<div class="testDiv">
	<h3>Locking and Unlocking the Screen</h3>
	<script id="screenLockingScript">
function testLockScreen(textElement) {
	try {
		airlock.device.lockScreen();
		setText(textElement, "Locked streen.");
	} catch (e) {
		setText(textElement, "Error: " + e);
		return;
	}
}

function testIsScreenLocked(textElement) {
	try {
		var locked = airlock.device.isScreenLocked();
		setText(textElement, "Screen locked: " + locked);
	} catch (e) {
		setText(textElement, "Error: " + e);
		return;
	}
}

function testUnlockScreen(textElement) {
	try {
		airlock.device.lockScreen();
		window.setTimeout(function () {
			try {
				airlock.device.unlockScreen();
				setText(textElement, "Screen unlocked.");
			} catch (e2) {
				setText(textElement, "Error " + e2);
			}
		}, 4000);

	} catch (e) {
		setText(textElement, "Error: " + e);
		return;
	}
}
	</script>
	<pre class="example" id="screenLockingPre"></pre>
	<script>insertScriptInPre('screenLockingPre', 'screenLockingScript');</script>
	<input type="button" onclick="testLockScreen('testLockScreenText')" value="Lock Screen" />
	<div>
		Changing the lock screen requires device administration privileges,
		which can be obtained via the Administration screen, within the app.
	</div>
	<input type="button" onclick="testIsScreenLocked('testLockScreenText')" value="Is Screen Locked" /><br />
	<input type="button" onclick="testUnlockScreen('testLockScreenText')" value="Unlock Screen" /><br />
	<div class="outputText" type="text" id="testLockScreenText"></div>
</div>

<div class="testDiv">
	<h3>Reading Power Information</h3>
	<script id="readingPowerInfoScript">
function testGetPower(textElement) {
	try {
		var value = airlock.device.getPower();
		var text = getPropertyValues(value);
		setText(textElement, text);
	} catch (e) {
		setText(textElement, "Error: " + e);
		return;
	}
}
	</script>
	<pre class="example" id="readingPowerInfoPre"></pre>
	<script>insertScriptInPre('readingPowerInfoPre', 'readingPowerInfoScript');</script>
	<input type="button" onclick="testGetPower('testGetPowerText')" value="Get Power Info" />
	<div class="outputText" type="text" id="testGetPowerText"></div>
</div>

<div class="testDiv">
	<h3>Subscribing to the Power Changed Event</h3>
	<script id="powerChangedEventScript">
function testSubscribeToPowerChanged(textElement) {
	try {
		airlock.device.onPowerChanged.addListener(handlePowerChanged);
		setText(textElement, 'Subscribed.');
	} catch (e) {
		setText(textElement, "Error: " + e);
		return;
	}
}

function handlePowerChanged(args) {
	setText('testConnectionChangedEventText', getPropertyValues(args));
}

function testUnsubscribeToPowerChanged(textElement) {
	try {
		airlock.device.onPowerChanged.removeListener(handlePowerChanged);
		setText(textElement, "Unsubscribed");
	} catch (e) {
		setText(textElement, "Error: " + e);
		return;
	}
}
	</script>
	<pre class="example" id="powerChangedEventPre"></pre>
	<script>insertScriptInPre('powerChangedEventPre', 'powerChangedEventScript');</script>
	<input type="button" onclick="testSubscribeToPowerChanged('testConnectionChangedEventText')" value="Subscribe to Power Changed" /><br />
	<input type="button" onclick="testUnsubscribeToPowerChanged('testConnectionChangedEventText')" value="Unsubscribe" /><br />
	<div class="outputText" type="text" id="testConnectionChangedEventText"></div>
</div>

<div class="testDiv">
	<h3>Obtaining OS System Information</h3>
	<script id="osInfoScript">
function testGetSystemInfo(textElement) {
	try {
		var value = airlock.device.getSystemInfo();
		var text = getPropertyValues(value);
		setText(textElement, text);
	} catch (e) {
		setText(textElement, "Error: " + e);
		return;
	}
}
	</script><pre class="example" id="osInfoPre"></pre><script>insertScriptInPre('osInfoPre', 'osInfoScript');</script>
	<input type="button" onclick="testGetSystemInfo('testGetSystemInfoText')" value="Get System Info" />
	<div class="outputText" type="text" id="testGetSystemInfoText"></div>
</div>

<div class="testDiv">
	<h3>Exiting the Browser</h3>
	<script id="exitingBrowserScript">
function testExitApp(textElement) {
	try {
		airlock.device.exitApp(true);
		setText(textElement, "Closing...");
	} catch (e) {
		setText(textElement, "Error: " + e);
		return;
	}
}
	</script><pre class="example" id="exitingBrowserPre"></pre><script>insertScriptInPre('exitingBrowserPre', 'exitingBrowserScript');</script>
	<input type="button" onclick="testExitApp('testExitAppText')" value="Exit App" />
	<div class="outputText" type="text" id="testExitAppText"></div>
</div>

<div class="testDiv">
	<h3>Minimizing the Browser</h3>
	<script id="minimizingBrowserScript">
function testMinimizeApp(textElement) {
	try {
		airlock.device.minimizeApp();
		setText(textElement, "Minimize attempted");
	} catch (e) {
		setText(textElement, "Error: " + e);
		return;
	}
}
	</script><pre class="example" id="minimizingBrowserPre"></pre><script>insertScriptInPre('minimizingBrowserPre', 'minimizingBrowserScript');</script>
	<input type="button" onclick="testMinimizeApp('minimizeAppText')" value="Minimize App" />
	<div class="outputText" type="text" id="minimizeAppText"></div>
</div>

<div class="testDiv">
	<h3>Launching a Third-Party App</h3>
	<script id="launchingAppScript">
function testLaunchApp(textElement) {
	try {
		airlock.device.launchApp('com.google.android.apps.photos');
		setText(textElement, "Launching app...");
	} catch (e) {
		setText(textElement, "Error: " + e);
		return;
	}
}
	</script><pre class="example" id="launchingAppPre"></pre><script>insertScriptInPre('launchingAppPre', 'launchingAppScript');</script>
	<input type="button" onclick="testLaunchApp('testLaunchAppText')" value="Launch App" />
	<div class="outputText" type="text" id="testLaunchAppText"></div>
</div>
</body>
</html>